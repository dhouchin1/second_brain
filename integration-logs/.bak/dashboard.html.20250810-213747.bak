{% extends "base.html" %}
{% block title %}Dashboard — Second Brain Premium{% endblock %}
{% block content %}
<div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
  <section class="lg:col-span-2 rounded-2xl bg-white/95 dark:bg-slate-950/90 shadow-xl ring-1 ring-black/5 p-6">
    <h2 class="text-lg font-semibold text-slate-900 dark:text-white">Quick Capture</h2>
    <form class="mt-3 grid gap-3" hx-post="/notes" hx-target="#recent-list" hx-swap="afterbegin">
      <textarea id="body" name="body" rows="5" placeholder="Jot something down…"
        class="w-full rounded-xl border-slate-300 dark:border-slate-700 dark:bg-slate-900 dark:text-slate-100"></textarea>
      <input type="hidden" id="tagsInput" name="tags" value="">
      <div>
        <div class="text-xs text-slate-500 mb-1">Tags</div>
        <div id="tag-editor" class="min-h-[44px] rounded-xl px-2 py-2 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 flex flex-wrap gap-2 relative">
          <input id="tag-entry" type="text" placeholder="type, Tab/Enter to accept"
                 class="bg-transparent outline-none flex-1 min-w-[140px] text-slate-800 dark:text-slate-200 placeholder:text-slate-400" />
          <div id="tag-auto" class="absolute left-2 right-2 top-full mt-1 hidden rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 overflow-hidden"></div>
        </div>
        <div id="tag-suggestions" class="mt-2 flex flex-wrap gap-2"></div>
      </div>
      <div class="flex gap-2">
        <button class="px-4 py-2 rounded-xl bg-brand-600 text-white">Save</button>
        <a href="/notes" class="px-4 py-2 rounded-xl bg-slate-200 dark:bg-slate-800">All Notes</a>
      </div>
    </form>
  </section>

  <aside class="rounded-2xl bg-white/95 dark:bg-slate-950/90 shadow-xl ring-1 ring-black/5 p-6">
    <h2 class="text-lg font-semibold text-slate-900 dark:text-white">Stats</h2>
    <div class="mt-2 text-sm text-slate-600 dark:text-slate-300">Notes: <b>{{ stats.notes }}</b></div>
    <h3 class="mt-4 text-sm font-medium text-slate-900 dark:text-white">Top tags</h3>
    <div class="mt-2 flex flex-wrap gap-2">
      {% for t in top_tags %}
        <a href="/notes?tag={{ t.name }}" class="inline-block px-2 py-0.5 rounded bg-slate-100 dark:bg-slate-800">#{{ t.name }} ({{ t.usage }})</a>
      {% else %}
        <div class="text-slate-500 text-sm">No tags yet.</div>
      {% endfor %}
    </div>
    <div class="mt-6">
      <a href="/embeddings" class="text-sm text-slate-600 hover:underline dark:text-slate-300">Embeddings Admin →</a>
    </div>
  </aside>
</div>

<section class="mt-6 rounded-2xl bg-white/95 dark:bg-slate-950/90 shadow-xl ring-1 ring-black/5 p-6">
  <h2 class="text-lg font-semibold text-slate-900 dark:text-white">Recent</h2>
  <ul id="recent-list" class="mt-3 divide-y divide-slate-200/80 dark:divide-white/10">
    {% for n in recent %}
      {% include 'partials/note_item.html' %}
    {% else %}
      <li class="py-6 text-slate-500">No notes yet — try Quick Capture above.</li>
    {% endfor %}
  </ul>
</section>
{% endblock %}
