{% extends "base.html" %}
{% block title %}API Tokens — Second Brain{% endblock %}
{% block content %}
<div class="rounded-2xl bg-white/95 dark:bg-slate-950/90 shadow-xl ring-1 ring-black/5 p-6">
  <h1 class="text-xl font-semibold text-slate-900 dark:text-white">API Tokens</h1>
  <p class="text-sm text-slate-500 mt-1">Use these with <code>Authorization: Bearer &lt;token&gt;</code>.</p>

  <form class="mt-4 flex gap-2 items-center" action="/tokens/create" method="post">
    <input name="name" placeholder="token name" class="rounded-xl border-slate-300 dark:border-slate-700 dark:bg-slate-900 dark:text-slate-100 px-3 py-2">
    <button class="px-3 py-2 rounded-xl bg-brand-600 text-white">Create</button>
  </form>

  {% if new_token %}
    <div class="mt-4 p-3 rounded-lg bg-amber-50 dark:bg-amber-900/30 border border-amber-300 dark:border-amber-800">
      <div class="text-sm">Copy your new token now — you won’t see it again:</div>
      <code class="block mt-1 break-all">{{ new_token }}</code>
    </div>
  {% endif %}

  <h2 class="mt-6 text-sm font-medium">Existing</h2>
  <ul class="mt-2 divide-y divide-slate-200/80 dark:divide-white/10">
    {% for t in tokens %}
      <li class="py-2 flex items-center justify-between">
        <div class="text-sm">{{ t.name }} <span class="text-slate-500">• {{ t.created_at }}</span></div>
        <form method="post" action="/tokens/revoke">
          <input type="hidden" name="id" value="{{ t.id }}">
          <button class="text-rose-600 hover:underline">Revoke</button>
        </form>
      </li>
    {% else %}
      <li class="py-6 text-slate-500">No tokens yet.</li>
    {% endfor %}
  </ul>
</div>
{% endblock %}
